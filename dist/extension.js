"use strict";var P=Object.create;var L=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var j=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var $=(r,e)=>{for(var t in e)L(r,t,{get:e[t],enumerable:!0})},I=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of W(e))!_.call(r,c)&&c!==t&&L(r,c,{get:()=>e[c],enumerable:!(s=F(e,c))||s.enumerable});return r};var M=(r,e,t)=>(t=r!=null?P(j(r)):{},I(e||!r||!r.__esModule?L(t,"default",{value:r,enumerable:!0}):t,r)),Z=r=>I(L({},"__esModule",{value:!0}),r);var X={};$(X,{activate:()=>K,deactivate:()=>Y});module.exports=Z(X);var i=M(require("vscode")),C=M(require("path"));var E=M(require("vscode")),A=/[\p{Mn}\u0300-\u036f]/gu;function x(r,e,t){return!r||!e?e:t&&Object.keys(t).length>0?q(r,e,t):B(r,e)}function q(r,e,t){let s=r.length,c=e.length,o=new Array(c),a=0,n=0;for(;a<s&&n<c;){if(a+1<s){let g=r.substring(a,a+2),l=t[g];if(l&&l===e[n]){let p=e[n];o[n]=g[0]===g[0].toUpperCase()?p.toUpperCase():p.toLowerCase(),a+=2,n++;continue}}let u=r[a],d=e[n];o[n]=u===u.toUpperCase()?d.toUpperCase():d.toLowerCase(),a++,n++}return o.join("")}function B(r,e){if(!r||!e)return e;let t=r.length,s=e.length,c=r.toUpperCase(),o=r.toLowerCase();if(r===c)return e.toUpperCase();if(r===o)return e.toLowerCase();if(t>0&&r[0]===c[0]&&r.slice(1)===o.slice(1))return e[0].toUpperCase()+e.slice(1).toLowerCase();let a=new Array(s),n=Math.min(t,s);for(let u=0;u<n;u++){let d=r[u],g=o[u];a[u]=d===g?e[u].toLowerCase():e[u].toUpperCase()}if(s>n){let g=r[t-1]!==o[t-1]?l=>l.toUpperCase():l=>l.toLowerCase();for(let l=n;l<s;l++)a[l]=g(e[l])}return a.join("")}function S(r){if(!r||typeof r!="object")return E.l10n.t("Invalid mappings: Not an object.");for(let[e,t]of Object.entries(r)){if(typeof e!="string"||e.length!==1)return E.l10n.t("Invalid key: '{key}'. Keys must be single characters.",{key:e});if(typeof t!="string")return E.l10n.t("Invalid value for key '{key}': '{value}'. Values must be strings.",{key:e,value:t})}return""}function k(r){return Array.from(new Set(r.split(`
`).map(e=>e.trim()).filter(e=>e.length>0)))}var y=M(require("fs")),b=M(require("path"));var R=[{language:"czech",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u010F",ascii:"d"},{letter:"\u010E",ascii:"D"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\u011B",ascii:"e"},{letter:"\u011A",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\u0148",ascii:"n"},{letter:"\u0147",ascii:"N"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\u0159",ascii:"r"},{letter:"\u0158",ascii:"R"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u0165",ascii:"t"},{letter:"\u0164",ascii:"T"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\u016F",ascii:"u"},{letter:"\u016E",ascii:"U"},{letter:"\xFD",ascii:"y"},{letter:"\xDD",ascii:"Y"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"danish",letters:[{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xF8",ascii:"oe"},{letter:"\xD8",ascii:"Oe"},{letter:"\xE5",ascii:"aa"},{letter:"\xC5",ascii:"Aa"}]},{language:"french",letters:[{letter:"\xE0",ascii:"a"},{letter:"\xC0",ascii:"A"},{letter:"\xE2",ascii:"a"},{letter:"\xC2",ascii:"A"},{letter:"\xE4",ascii:"a"},{letter:"\xC4",ascii:"A"},{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xE7",ascii:"c"},{letter:"\xC7",ascii:"C"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xE8",ascii:"e"},{letter:"\xC8",ascii:"E"},{letter:"\xEA",ascii:"e"},{letter:"\xCA",ascii:"E"},{letter:"\xEB",ascii:"e"},{letter:"\xCB",ascii:"E"},{letter:"\xEF",ascii:"i"},{letter:"\xCF",ascii:"I"},{letter:"\xEE",ascii:"i"},{letter:"\xCE",ascii:"I"},{letter:"\xF4",ascii:"o"},{letter:"\xD4",ascii:"O"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"},{letter:"\u0153",ascii:"oe"},{letter:"\u0152",ascii:"Oe"},{letter:"\xF9",ascii:"u"},{letter:"\xD9",ascii:"U"},{letter:"\xFB",ascii:"u"},{letter:"\xDB",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"},{letter:"\xFF",ascii:"y"},{letter:"\u0178",ascii:"Y"}]},{language:"german",letters:[{letter:"\xE4",ascii:"ae"},{letter:"\xC4",ascii:"Ae"},{letter:"\xF6",ascii:"oe"},{letter:"\xD6",ascii:"Oe"},{letter:"\xFC",ascii:"ue"},{letter:"\xDC",ascii:"Ue"},{letter:"\xDF",ascii:"ss"},{letter:"\u1E9E",ascii:"SS"}]},{language:"hungarian",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"},{letter:"\u0151",ascii:"o"},{letter:"\u0150",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"},{letter:"\u0171",ascii:"u"},{letter:"\u0170",ascii:"U"}]},{language:"polish",letters:[{letter:"\u0105",ascii:"a"},{letter:"\u0104",ascii:"A"},{letter:"\u0107",ascii:"c"},{letter:"\u0106",ascii:"C"},{letter:"\u0119",ascii:"e"},{letter:"\u0118",ascii:"E"},{letter:"\u0142",ascii:"l"},{letter:"\u0141",ascii:"L"},{letter:"\u0144",ascii:"n"},{letter:"\u0143",ascii:"N"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\u015B",ascii:"s"},{letter:"\u015A",ascii:"S"},{letter:"\u017A",ascii:"z"},{letter:"\u0179",ascii:"Z"},{letter:"\u017C",ascii:"z"},{letter:"\u017B",ascii:"Z"}]},{language:"slovak",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE4",ascii:"a"},{letter:"\xC4",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u010F",ascii:"d"},{letter:"\u010E",ascii:"D"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\u013E",ascii:"l"},{letter:"\u013D",ascii:"L"},{letter:"\u013A",ascii:"l"},{letter:"\u0139",ascii:"L"},{letter:"\u0148",ascii:"n"},{letter:"\u0147",ascii:"N"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF4",ascii:"o"},{letter:"\xD4",ascii:"O"},{letter:"\u0155",ascii:"r"},{letter:"\u0154",ascii:"R"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u0165",ascii:"t"},{letter:"\u0164",ascii:"T"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFD",ascii:"y"},{letter:"\xDD",ascii:"Y"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"spanish",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"},{letter:"\xF1",ascii:"n"},{letter:"\xD1",ascii:"N"}]},{language:"swedish",letters:[{letter:"\xE5",ascii:"aa"},{letter:"\xC5",ascii:"Aa"},{letter:"\xE4",ascii:"ae"},{letter:"\xC4",ascii:"Ae"},{letter:"\xF6",ascii:"oe"},{letter:"\xD6",ascii:"Oe"}]},{language:"portuguese",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE2",ascii:"a"},{letter:"\xC2",ascii:"A"},{letter:"\xE3",ascii:"a"},{letter:"\xC3",ascii:"A"},{letter:"\xE0",ascii:"a"},{letter:"\xC0",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xEA",ascii:"e"},{letter:"\xCA",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF4",ascii:"o"},{letter:"\xD4",ascii:"O"},{letter:"\xF5",ascii:"o"},{letter:"\xD5",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xE7",ascii:"c"},{letter:"\xC7",ascii:"C"}]},{language:"italian",letters:[{letter:"\xE0",ascii:"a"},{letter:"\xC0",ascii:"A"},{letter:"\xE8",ascii:"e"},{letter:"\xC8",ascii:"E"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xEC",ascii:"i"},{letter:"\xCC",ascii:"I"},{letter:"\xF2",ascii:"o"},{letter:"\xD2",ascii:"O"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF9",ascii:"u"},{letter:"\xD9",ascii:"U"}]},{language:"norwegian",letters:[{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xF8",ascii:"oe"},{letter:"\xD8",ascii:"Oe"},{letter:"\xE5",ascii:"aa"},{letter:"\xC5",ascii:"Aa"}]},{language:"icelandic",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFD",ascii:"y"},{letter:"\xDD",ascii:"Y"},{letter:"\xF0",ascii:"d"},{letter:"\xD0",ascii:"D"},{letter:"\xFE",ascii:"th"},{letter:"\xDE",ascii:"Th"},{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"}]},{language:"dutch",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xEB",ascii:"e"},{letter:"\xCB",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xEF",ascii:"i"},{letter:"\xCF",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"}]},{language:"croatian",letters:[{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0107",ascii:"c"},{letter:"\u0106",ascii:"C"},{letter:"\u0111",ascii:"d"},{letter:"\u0110",ascii:"D"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"slovenian",letters:[{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"romanian",letters:[{letter:"\u0103",ascii:"a"},{letter:"\u0102",ascii:"A"},{letter:"\xE2",ascii:"a"},{letter:"\xC2",ascii:"A"},{letter:"\xEE",ascii:"i"},{letter:"\xCE",ascii:"I"},{letter:"\u0219",ascii:"s"},{letter:"\u0218",ascii:"S"},{letter:"\u0163",ascii:"t"},{letter:"\u0162",ascii:"T"},{letter:"\u021B",ascii:"t"},{letter:"\u021A",ascii:"T"}]},{language:"lithuanian",letters:[{letter:"\u0105",ascii:"a"},{letter:"\u0104",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0119",ascii:"e"},{letter:"\u0118",ascii:"E"},{letter:"\u0117",ascii:"e"},{letter:"\u0116",ascii:"E"},{letter:"\u012F",ascii:"i"},{letter:"\u012E",ascii:"I"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u0173",ascii:"u"},{letter:"\u0172",ascii:"U"},{letter:"\u016B",ascii:"u"},{letter:"\u016A",ascii:"U"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"latvian",letters:[{letter:"\u0101",ascii:"a"},{letter:"\u0100",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0113",ascii:"e"},{letter:"\u0112",ascii:"E"},{letter:"\u0123",ascii:"g"},{letter:"\u0122",ascii:"G"},{letter:"\u012B",ascii:"i"},{letter:"\u012A",ascii:"I"},{letter:"\u0137",ascii:"k"},{letter:"\u0136",ascii:"K"},{letter:"\u013C",ascii:"l"},{letter:"\u013B",ascii:"L"},{letter:"\u0146",ascii:"n"},{letter:"\u0145",ascii:"N"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u016B",ascii:"u"},{letter:"\u016A",ascii:"U"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]}];var O=class r{dictionary=new Map;currentMappings;ignoredWords;currentLanguage;isReady=!1;dictionaryBasePath;restorationCache=new Map;MAX_CACHE_SIZE=1e3;enableSuffixMatching;minSuffixStemLength;static WORD_REGEX=/[\p{L}\p{M}'\u2019-]+/gu;constructor(e,t=[],s=!1,c=2){this.currentLanguage=e,this.enableSuffixMatching=s,this.minSuffixStemLength=c,this.currentMappings=e?R.find(o=>o.language===e):void 0,this.ignoredWords=new Set(t.map(o=>this.removeDiacritics(o.toLowerCase()))),this.dictionaryBasePath=b.join(__dirname,"dictionary")}getAllMappings(e=!1){return this.currentMappings?Object.fromEntries(this.currentMappings.letters.map(t=>e?[t.ascii,t.letter]:[t.letter,t.ascii])):{}}getSpecialCharsPattern(){if(!this.currentMappings?.letters.length)return;let e=this.currentMappings.letters.map(t=>t.letter).map(t=>t).join("");return new RegExp(`[${e}]`,"gu")}async initialize(){if(!this.isReady){if(this.currentLanguage){let e=b.join(this.dictionaryBasePath,`dict_${this.currentLanguage}.txt`),t=await this.readDictionaryFile(e);this.buildDictionary(t)}this.isReady=!0}}async readDictionaryFile(e){return new Promise((t,s)=>{y.access(e,y.constants.F_OK,c=>{if(c){s(new Error(`Dictionary file not found: ${e}`));return}let o=y.createReadStream(e,{encoding:"utf8",highWaterMark:64*1024}),a="";o.on("data",n=>{a+=n}),o.on("end",()=>t(a)),o.on("error",n=>{s(new Error(`Error reading dictionary file: ${e}. Error: ${n.message}`))})})})}buildDictionary(e){let t=e.split(`
`),s=0,c=0;for(let o=0;o<t.length;o++){let a=t[o].trim();if(!a)continue;let n=a.indexOf("	");if(n===-1){c++;continue}let u=a.substring(0,n),d=a.substring(n+1),g=u.trim().toLowerCase(),l=parseInt(d.trim(),10);if(isNaN(l)||l<=0||l>Number.MAX_SAFE_INTEGER){c++;continue}if(!g){c++;continue}let p=this.removeDiacritics(g),f=this.dictionary.get(p);f||(f=[],this.dictionary.set(p,f));let h={word:g,frequency:l},m=0,v=f.length;for(;m<v;){let w=m+v>>>1;f[w].frequency>=l?m=w+1:v=w}f.splice(m,0,h),s++}console.log(`Loaded ${s} words for language ${this.currentLanguage} (${c} errors)`)}restoreDiacritics(e){if(!this.isReady)throw new Error("Accent restorer not initialized. Call initialize() first.");return e.replace(r.WORD_REGEX,t=>{let s=this.restorationCache.get(t);if(s!==void 0)return s;let c=t.toLowerCase(),o=this.removeDiacritics(c);if(this.ignoredWords.has(o))return this.addToCache(t,t),t;let n=this.findBestMatch(t,c,o)||t;return this.addToCache(t,n),n})}addToCache(e,t){if(this.restorationCache.size>=this.MAX_CACHE_SIZE){let s=this.restorationCache.keys().next().value;s&&this.restorationCache.delete(s)}this.restorationCache.set(e,t)}findBestMatch(e,t,s){let c=this.dictionary.get(s);if(!c||c.length===0)return this.enableSuffixMatching?this.findSuffixMatch(e,t,s):null;let o=c[0].word,a=this.getAllMappings(!0);return x(e,o,a)}findSuffixMatch(e,t,s){let c=s.length,o=this.getAllMappings(!0),a=Math.max(this.minSuffixStemLength,Math.floor(c*.6));for(let n=c-1;n>=a;n--){let u=s.substring(0,n),d=this.dictionary.get(u);if(d&&d.length>0){let g=d[0].word,l=t.substring(n),p=g+l;return x(e,p,o)}}return null}removeDiacritics(e){if(!e||typeof e!="string")return e;let t=this.getAllMappings();if(Object.keys(t).length===0)return this.normalize(e);let s=this.getSpecialCharsPattern();if(!s)return this.normalize(e);let c=e.replace(s,o=>t[o]??o);return this.normalize(c)}normalize(e){return e.normalize("NFKD").replace(A,"")}async changeLanguage(e){e===this.currentLanguage&&this.isReady||(this.dictionary.clear(),this.restorationCache.clear(),this.currentLanguage=e,this.isReady=!1,await this.initialize())}dispose(){this.dictionary.clear(),this.ignoredWords.clear(),this.restorationCache.clear(),this.isReady=!1,this.currentLanguage=void 0,this.currentMappings=void 0}getMemoryUsage(){let e=Array.from(this.dictionary.values()).reduce((s,c)=>s+c.length,0);return`Dictionary: ${this.dictionary.size} base forms, ${e} total entries, Cache: ${this.restorationCache.size} words, Language: ${this.currentLanguage||"none"}`}getIsReady(){return this.isReady}getCurrentLanguage(){return this.currentLanguage}},z=O;var D=class{currentLanguage;currentMappings;constructor(e=void 0,t={}){this.currentLanguage=e;let s=e?R.find(o=>o.language===e):void 0,c=Object.entries(t).map(([o,a])=>({letter:o,ascii:a}));s?this.currentMappings={language:s.language,letters:[...s.letters,...c]}:this.currentMappings={language:"",letters:c}}getAllMappings(){return this.currentMappings?Object.fromEntries(this.currentMappings.letters.map(e=>[e.letter,e.ascii])):{}}getSpecialCharsPattern(){if(!this.currentMappings?.letters.length)return;let e=this.currentMappings.letters.map(t=>t.letter).map(t=>t).join("");return new RegExp(`[${e}]`,"gu")}removeDiacritics(e){if(!e||typeof e!="string")return e;let t=this.getAllMappings();if(Object.keys(t).length===0)return this.normalize(e);let s=this.getSpecialCharsPattern();if(!s)return this.normalize(e);let c=e.replace(s,o=>t[o]??o);return this.normalize(c)}normalize(e){return e.normalize("NFKD").replace(A,"")}},U=D;function K(r){let e;(g=>(g.ReportIssue="ps-replace-accents.reportIssue",g.ReplaceDiacriticts="ps-replace-accents.removeDiacritics",g.ReplaceDiacritictsFileOrFolder="ps-replace-accents.removeDiacriticsFileOrFolder",g.RestoreDiacritics="ps-replace-accents.restoreDiacritics"))(e||={});let t=async(a,n=!1,u)=>{let d=i.window.activeTextEditor;if(!d)return 0;let g=!1,l=d.document,p=d.selections;if(!p.length||p.every(f=>f.isEmpty)){let f=new i.Range(0,0,l.lineCount-1,l.lineAt(l.lineCount-1).text.length),h=l.getText(f),m=h.length>0?a(h,u):"";return h!==m&&(await d.edit(v=>v.replace(f,m)),g=!0),g?2:0}return await d.edit(f=>{for(let h of p){if(h.isEmpty)continue;let m=h;if(n){let T=l.lineAt(h.start.line),N=l.lineAt(h.end.line);m=new i.Selection(T.range.start,N.range.end)}let v=l.getText(m),w=v.length>0?a(v,u):"";v!==w&&(f.replace(m,w),g=!0)}}),g?1:0},s=async(a,n={},u)=>{let d=new U(a,n),g=u.fsPath,l=C.basename(g),p=C.dirname(g),f=d.removeDiacritics(l);if(f.trim().length===0)return;if(l===f){i.window.showWarningMessage(i.l10n.t("No diacritics were removed from '{0}'.",l));return}let h=C.join(p,f),m=i.Uri.file(h),v=!1;try{await i.workspace.fs.stat(m);let w=await i.window.showWarningMessage(i.l10n.t("'{0}' already exists. Do you want to overwrite it?",f),{modal:!0},i.l10n.t("Yes"),i.l10n.t("No"));if(w===i.l10n.t("Yes"))v=!0;else if(w===i.l10n.t("No"))return}catch{}try{await i.workspace.fs.rename(u,i.Uri.file(h),{overwrite:v}),i.window.showInformationMessage(i.l10n.t("Renamed: {0} to {1}",l,f))}catch(w){i.window.showErrorMessage(i.l10n.t("Failed to rename '{0}': {1}",l,w.message))}},c=async()=>{let a=i.workspace.getConfiguration("ps-replace-accents").get("textLanguage","off");return a==="off"&&await i.window.showWarningMessage(i.l10n.t("Select a text language in Settings to restore diacritics."),i.l10n.t("Open Settings"),i.l10n.t("Cancel"))===i.l10n.t("Open Settings")&&await i.commands.executeCommand("workbench.action.openSettings","ps-replace-accents.textLanguage"),a},o={"ps-replace-accents.reportIssue":()=>i.env.openExternal(i.Uri.parse("https://github.com/playfulsparkle/vscode_ps_replace_accents/issues")),"ps-replace-accents.removeDiacritics":async()=>{let a=i.workspace.getConfiguration("ps-replace-accents").get("userCharacterMapping",{}),n=S(a);if(n){i.window.showErrorMessage(n);return}let u=i.workspace.getConfiguration("ps-replace-accents").get("textLanguage","off"),d=u==="off"?void 0:u,g=new U(d,a);switch(await t(p=>g.removeDiacritics(p))){case 1:i.window.showInformationMessage(i.l10n.t("Removed diacritics in selection."));break;case 2:i.window.showInformationMessage(i.l10n.t("Removed diacritics in document."));break}},"ps-replace-accents.removeDiacriticsFileOrFolder":async(a,n)=>{if(!a)return;let u=i.workspace.getConfiguration("ps-replace-accents").get("userCharacterMapping",{}),d=S(u);if(d){i.window.showErrorMessage(d);return}let g=await c();if(g==="off")return;let l=n&&n.length>0?n:[a];for(let p of l)await s(g,u,p);l.length>1&&i.window.showInformationMessage(i.l10n.t("Diacritics removed from {0} items.",l.length))},"ps-replace-accents.restoreDiacritics":async()=>{let a=i.workspace.getConfiguration("ps-replace-accents").get("diacriticRestoreSuffixMatching",!1),n=i.workspace.getConfiguration("ps-replace-accents").get("diacriticIgnoredWords",""),u=k(n),d=await c();if(d==="off")return;let g=new z(d,u,a);await g.initialize();let l=await t(p=>g.restoreDiacritics(p));switch(g.dispose(),l){case 1:i.window.showInformationMessage(i.l10n.t("Restored diacritics in selection."));break;case 2:i.window.showInformationMessage(i.l10n.t("Restored diacritics in document."));break}}};for(let[a,n]of Object.entries(o)){let u=i.commands.registerCommand(a,n);r.subscriptions.push(u)}}function Y(){}0&&(module.exports={activate,deactivate});
