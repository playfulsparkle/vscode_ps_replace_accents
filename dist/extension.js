"use strict";var $=Object.create;var E=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var W=Object.getOwnPropertyNames;var B=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var H=(l,e)=>{for(var a in e)E(l,a,{get:e[a],enumerable:!0})},I=(l,e,a,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of W(e))!G.call(l,i)&&i!==a&&E(l,i,{get:()=>e[i],enumerable:!(t=F(e,i))||t.enumerable});return l};var L=(l,e,a)=>(a=l!=null?$(B(l)):{},I(e||!l||!l.__esModule?E(a,"default",{value:l,enumerable:!0}):a,l)),Z=l=>I(E({},"__esModule",{value:!0}),l);var J={};H(J,{activate:()=>V,deactivate:()=>Q});module.exports=Z(J);var n=L(require("vscode")),C=L(require("path"));var M=L(require("vscode")),X=/[\p{Mn}\u0300-\u036f]/gu;function b(l){return l.normalize("NFKD").replace(X,"")}function R(l,e,a){return!l||!e?e:a&&Object.keys(a).length>0?Y(l,e,a):K(l,e)}function Y(l,e,a){let t=l.length,i=e.length,s=new Array(i),r=0,o=0;for(;r<t&&o<i;){if(r+1<t){let u=l.substring(r,r+2),g=a[u];if(g&&g===e[o]){let f=e[o];s[o]=u[0]===u[0].toUpperCase()?f.toUpperCase():f.toLowerCase(),r+=2,o++;continue}}let h=l[r],c=e[o];s[o]=h===h.toUpperCase()?c.toUpperCase():c.toLowerCase(),r++,o++}return s.join("")}function K(l,e){if(!l||!e)return e;let a=l.length,t=e.length,i=l.toUpperCase(),s=l.toLowerCase();if(l===i)return e.toUpperCase();if(l===s)return e.toLowerCase();if(a>0&&l[0]===i[0]&&l.slice(1)===s.slice(1))return e[0].toUpperCase()+e.slice(1).toLowerCase();let r=new Array(t),o=Math.min(a,t);for(let h=0;h<o;h++){let c=l[h],u=s[h];r[h]=c===u?e[h].toLowerCase():e[h].toUpperCase()}if(t>o){let u=l[a-1]!==s[a-1]?g=>g.toUpperCase():g=>g.toLowerCase();for(let g=o;g<t;g++)r[g]=u(e[g])}return r.join("")}function A(l){if(!l||typeof l!="object")return M.l10n.t("Invalid mappings: Not an object.");for(let[e,a]of Object.entries(l)){if(typeof e!="string"||e.length!==1)return M.l10n.t("Invalid key: '{key}'. Keys must be single characters.",{key:e});if(typeof a!="string")return M.l10n.t("Invalid value for key '{key}': '{value}'. Values must be strings.",{key:e,value:a})}return""}function N(l){return Array.from(new Set(l.split(`
`).map(e=>e.trim()).filter(e=>e.length>0)))}var z=L(require("fs")),O=L(require("path"));var x=[{language:"czech",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u010F",ascii:"d"},{letter:"\u010E",ascii:"D"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\u011B",ascii:"e"},{letter:"\u011A",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\u0148",ascii:"n"},{letter:"\u0147",ascii:"N"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\u0159",ascii:"r"},{letter:"\u0158",ascii:"R"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u0165",ascii:"t"},{letter:"\u0164",ascii:"T"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\u016F",ascii:"u"},{letter:"\u016E",ascii:"U"},{letter:"\xFD",ascii:"y"},{letter:"\xDD",ascii:"Y"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"danish",letters:[{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xF8",ascii:"oe"},{letter:"\xD8",ascii:"Oe"},{letter:"\xE5",ascii:"aa"},{letter:"\xC5",ascii:"Aa"}]},{language:"french",letters:[{letter:"\xE0",ascii:"a"},{letter:"\xC0",ascii:"A"},{letter:"\xE2",ascii:"a"},{letter:"\xC2",ascii:"A"},{letter:"\xE4",ascii:"a"},{letter:"\xC4",ascii:"A"},{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xE7",ascii:"c"},{letter:"\xC7",ascii:"C"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xE8",ascii:"e"},{letter:"\xC8",ascii:"E"},{letter:"\xEA",ascii:"e"},{letter:"\xCA",ascii:"E"},{letter:"\xEB",ascii:"e"},{letter:"\xCB",ascii:"E"},{letter:"\xEF",ascii:"i"},{letter:"\xCF",ascii:"I"},{letter:"\xEE",ascii:"i"},{letter:"\xCE",ascii:"I"},{letter:"\xF4",ascii:"o"},{letter:"\xD4",ascii:"O"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"},{letter:"\u0153",ascii:"oe"},{letter:"\u0152",ascii:"Oe"},{letter:"\xF9",ascii:"u"},{letter:"\xD9",ascii:"U"},{letter:"\xFB",ascii:"u"},{letter:"\xDB",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"},{letter:"\xFF",ascii:"y"},{letter:"\u0178",ascii:"Y"}]},{language:"german",letters:[{letter:"\xE4",ascii:"ae"},{letter:"\xC4",ascii:"Ae"},{letter:"\xF6",ascii:"oe"},{letter:"\xD6",ascii:"Oe"},{letter:"\xFC",ascii:"ue"},{letter:"\xDC",ascii:"Ue"},{letter:"\xDF",ascii:"ss"},{letter:"\u1E9E",ascii:"SS"}]},{language:"hungarian",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"},{letter:"\u0151",ascii:"o"},{letter:"\u0150",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"},{letter:"\u0171",ascii:"u"},{letter:"\u0170",ascii:"U"}]},{language:"polish",letters:[{letter:"\u0105",ascii:"a"},{letter:"\u0104",ascii:"A"},{letter:"\u0107",ascii:"c"},{letter:"\u0106",ascii:"C"},{letter:"\u0119",ascii:"e"},{letter:"\u0118",ascii:"E"},{letter:"\u0142",ascii:"l"},{letter:"\u0141",ascii:"L"},{letter:"\u0144",ascii:"n"},{letter:"\u0143",ascii:"N"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\u015B",ascii:"s"},{letter:"\u015A",ascii:"S"},{letter:"\u017A",ascii:"z"},{letter:"\u0179",ascii:"Z"},{letter:"\u017C",ascii:"z"},{letter:"\u017B",ascii:"Z"}]},{language:"slovak",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE4",ascii:"a"},{letter:"\xC4",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u010F",ascii:"d"},{letter:"\u010E",ascii:"D"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\u013E",ascii:"l"},{letter:"\u013D",ascii:"L"},{letter:"\u013A",ascii:"l"},{letter:"\u0139",ascii:"L"},{letter:"\u0148",ascii:"n"},{letter:"\u0147",ascii:"N"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF4",ascii:"o"},{letter:"\xD4",ascii:"O"},{letter:"\u0155",ascii:"r"},{letter:"\u0154",ascii:"R"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u0165",ascii:"t"},{letter:"\u0164",ascii:"T"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFD",ascii:"y"},{letter:"\xDD",ascii:"Y"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"spanish",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"},{letter:"\xF1",ascii:"n"},{letter:"\xD1",ascii:"N"}]},{language:"swedish",letters:[{letter:"\xE5",ascii:"aa"},{letter:"\xC5",ascii:"Aa"},{letter:"\xE4",ascii:"ae"},{letter:"\xC4",ascii:"Ae"},{letter:"\xF6",ascii:"oe"},{letter:"\xD6",ascii:"Oe"}]},{language:"portuguese",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE2",ascii:"a"},{letter:"\xC2",ascii:"A"},{letter:"\xE3",ascii:"a"},{letter:"\xC3",ascii:"A"},{letter:"\xE0",ascii:"a"},{letter:"\xC0",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xEA",ascii:"e"},{letter:"\xCA",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF4",ascii:"o"},{letter:"\xD4",ascii:"O"},{letter:"\xF5",ascii:"o"},{letter:"\xD5",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xE7",ascii:"c"},{letter:"\xC7",ascii:"C"}]},{language:"italian",letters:[{letter:"\xE0",ascii:"a"},{letter:"\xC0",ascii:"A"},{letter:"\xE8",ascii:"e"},{letter:"\xC8",ascii:"E"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xEC",ascii:"i"},{letter:"\xCC",ascii:"I"},{letter:"\xF2",ascii:"o"},{letter:"\xD2",ascii:"O"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF9",ascii:"u"},{letter:"\xD9",ascii:"U"}]},{language:"norwegian",letters:[{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xF8",ascii:"oe"},{letter:"\xD8",ascii:"Oe"},{letter:"\xE5",ascii:"aa"},{letter:"\xC5",ascii:"Aa"}]},{language:"icelandic",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFD",ascii:"y"},{letter:"\xDD",ascii:"Y"},{letter:"\xF0",ascii:"d"},{letter:"\xD0",ascii:"D"},{letter:"\xFE",ascii:"th"},{letter:"\xDE",ascii:"Th"},{letter:"\xE6",ascii:"ae"},{letter:"\xC6",ascii:"Ae"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"}]},{language:"dutch",letters:[{letter:"\xE1",ascii:"a"},{letter:"\xC1",ascii:"A"},{letter:"\xE9",ascii:"e"},{letter:"\xC9",ascii:"E"},{letter:"\xEB",ascii:"e"},{letter:"\xCB",ascii:"E"},{letter:"\xED",ascii:"i"},{letter:"\xCD",ascii:"I"},{letter:"\xEF",ascii:"i"},{letter:"\xCF",ascii:"I"},{letter:"\xF3",ascii:"o"},{letter:"\xD3",ascii:"O"},{letter:"\xF6",ascii:"o"},{letter:"\xD6",ascii:"O"},{letter:"\xFA",ascii:"u"},{letter:"\xDA",ascii:"U"},{letter:"\xFC",ascii:"u"},{letter:"\xDC",ascii:"U"}]},{language:"croatian",letters:[{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0107",ascii:"c"},{letter:"\u0106",ascii:"C"},{letter:"\u0111",ascii:"d"},{letter:"\u0110",ascii:"D"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"slovenian",letters:[{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"romanian",letters:[{letter:"\u0103",ascii:"a"},{letter:"\u0102",ascii:"A"},{letter:"\xE2",ascii:"a"},{letter:"\xC2",ascii:"A"},{letter:"\xEE",ascii:"i"},{letter:"\xCE",ascii:"I"},{letter:"\u0219",ascii:"s"},{letter:"\u0218",ascii:"S"},{letter:"\u0163",ascii:"t"},{letter:"\u0162",ascii:"T"},{letter:"\u021B",ascii:"t"},{letter:"\u021A",ascii:"T"}]},{language:"lithuanian",letters:[{letter:"\u0105",ascii:"a"},{letter:"\u0104",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0119",ascii:"e"},{letter:"\u0118",ascii:"E"},{letter:"\u0117",ascii:"e"},{letter:"\u0116",ascii:"E"},{letter:"\u012F",ascii:"i"},{letter:"\u012E",ascii:"I"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u0173",ascii:"u"},{letter:"\u0172",ascii:"U"},{letter:"\u016B",ascii:"u"},{letter:"\u016A",ascii:"U"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]},{language:"latvian",letters:[{letter:"\u0101",ascii:"a"},{letter:"\u0100",ascii:"A"},{letter:"\u010D",ascii:"c"},{letter:"\u010C",ascii:"C"},{letter:"\u0113",ascii:"e"},{letter:"\u0112",ascii:"E"},{letter:"\u0123",ascii:"g"},{letter:"\u0122",ascii:"G"},{letter:"\u012B",ascii:"i"},{letter:"\u012A",ascii:"I"},{letter:"\u0137",ascii:"k"},{letter:"\u0136",ascii:"K"},{letter:"\u013C",ascii:"l"},{letter:"\u013B",ascii:"L"},{letter:"\u0146",ascii:"n"},{letter:"\u0145",ascii:"N"},{letter:"\u0161",ascii:"s"},{letter:"\u0160",ascii:"S"},{letter:"\u016B",ascii:"u"},{letter:"\u016A",ascii:"U"},{letter:"\u017E",ascii:"z"},{letter:"\u017D",ascii:"Z"}]}];var T=class l{dictionary=new Map;currentMappings;ignoredWords;currentLanguage;isReady=!1;dictionaryBasePath;restorationCache=new Map;MAX_CACHE_SIZE=1e3;enableSuffixMatching;minSuffixStemLength;static WORD_REGEX=/[\p{L}\p{M}'\u2019-]+/gu;constructor(e,a=[],t=!1,i=2){this.currentLanguage=e,this.enableSuffixMatching=t,this.minSuffixStemLength=i,this.currentMappings=e?x.find(s=>s.language===e):void 0,this.ignoredWords=new Set(a.map(s=>this.removeDiacritics(s.toLowerCase()))),this.dictionaryBasePath=O.join(__dirname,"dictionary")}getAllMappings(e=!1){return this.currentMappings?Object.fromEntries(this.currentMappings.letters.map(a=>e?[a.ascii,a.letter]:[a.letter,a.ascii])):{}}getSpecialCharsPattern(){if(!this.currentMappings?.letters.length)return;let e=this.currentMappings.letters.map(a=>a.letter).map(a=>a).join("");return new RegExp(`[${e}]`,"gu")}async initialize(){if(!this.isReady){if(this.currentLanguage){let e=O.join(this.dictionaryBasePath,`dict_${this.currentLanguage}.txt`),a=await this.readDictionaryFile(e);this.buildDictionary(a)}this.isReady=!0}}async readDictionaryFile(e){return new Promise((a,t)=>{z.access(e,z.constants.F_OK,i=>{if(i){t(new Error(`Dictionary file not found: ${e}`));return}let s=z.createReadStream(e,{encoding:"utf8",highWaterMark:64*1024}),r="";s.on("data",o=>{r+=o}),s.on("end",()=>a(r)),s.on("error",o=>{t(new Error(`Error reading dictionary file: ${e}. Error: ${o.message}`))})})})}buildDictionary(e){let a=e.split(`
`),t=0,i=0;for(let s=0;s<a.length;s++){let r=a[s].trim();if(!r)continue;let o=r.indexOf("	");if(o===-1){i++;continue}let h=r.substring(0,o),c=r.substring(o+1),u=h.trim().toLowerCase(),g=parseInt(c.trim(),10);if(isNaN(g)||g<=0||g>Number.MAX_SAFE_INTEGER){i++;continue}if(!u){i++;continue}let f=this.removeDiacritics(u),d=this.dictionary.get(f);d||(d=[],this.dictionary.set(f,d));let p={word:u,frequency:g},m=0,v=d.length;for(;m<v;){let k=m+v>>>1;d[k].frequency>=g?m=k+1:v=k}d.splice(m,0,p),t++}console.log(`Loaded ${t} words for language ${this.currentLanguage} (${i} errors)`)}restoreDiacritics(e){if(!this.isReady)throw new Error("Accent restorer not initialized. Call initialize() first.");return e.replace(l.WORD_REGEX,a=>{let t=this.restorationCache.get(a);if(t!==void 0)return t;let i=a.toLowerCase(),s=this.removeDiacritics(i);if(this.ignoredWords.has(s))return this.addToCache(a,a),a;let o=this.findBestMatch(a,i,s)||a;return this.addToCache(a,o),o})}addToCache(e,a){if(this.restorationCache.size>=this.MAX_CACHE_SIZE){let t=this.restorationCache.keys().next().value;t&&this.restorationCache.delete(t)}this.restorationCache.set(e,a)}findBestMatch(e,a,t){let i=this.dictionary.get(t);if(!i||i.length===0)return this.enableSuffixMatching?this.findSuffixMatch(e,a,t):null;let s=i[0].word,r=this.getAllMappings(!0);return R(e,s,r)}findSuffixMatch(e,a,t){let i=t.length,s=this.getAllMappings(!0),r=Math.max(this.minSuffixStemLength,Math.floor(i*.6));for(let o=i-1;o>=r;o--){let h=t.substring(0,o),c=this.dictionary.get(h);if(c&&c.length>0){let u=c[0].word,g=a.substring(o),f=u+g;return R(e,f,s)}}return null}removeDiacritics(e){if(!e||typeof e!="string")return e;let a=this.getAllMappings();if(Object.keys(a).length===0)return b(e);let t=this.getSpecialCharsPattern();if(!t)return b(e);let i=e.replace(t,s=>a[s]??s);return b(i)}async changeLanguage(e){e===this.currentLanguage&&this.isReady||(this.dictionary.clear(),this.restorationCache.clear(),this.currentLanguage=e,this.isReady=!1,await this.initialize())}dispose(){this.dictionary.clear(),this.ignoredWords.clear(),this.restorationCache.clear(),this.isReady=!1,this.currentLanguage=void 0,this.currentMappings=void 0}getMemoryUsage(){let e=Array.from(this.dictionary.values()).reduce((t,i)=>t+i.length,0);return`Dictionary: ${this.dictionary.size} base forms, ${e} total entries, Cache: ${this.restorationCache.size} words, Language: ${this.currentLanguage||"none"}`}getIsReady(){return this.isReady}getCurrentLanguage(){return this.currentLanguage}},P=T;var D=class{currentLanguage;currentMappings;constructor(e=void 0,a={}){this.currentLanguage=e;let t=e?x.find(s=>s.language===e):void 0,i=Object.entries(a).map(([s,r])=>({letter:s,ascii:r}));t?this.currentMappings={language:t.language,letters:[...t.letters,...i]}:this.currentMappings={language:"",letters:i}}getAllMappings(){return this.currentMappings?Object.fromEntries(this.currentMappings.letters.map(e=>[e.letter,e.ascii])):{}}getSpecialCharsPattern(){if(!this.currentMappings?.letters.length)return;let e=this.currentMappings.letters.map(a=>a.letter).map(a=>a).join("");return new RegExp(`[${e}]`,"gu")}removeDiacritics(e){if(!e||typeof e!="string")return e;let a=this.getAllMappings();if(Object.keys(a).length===0)return b(e);let t=this.getSpecialCharsPattern();if(!t)return b(e);let i=e.replace(t,s=>a[s]??s);return b(i)}},U=D;var S=class{SUPPORTED_LANGUAGES=["czech","danish","french","german","hungarian","polish","slovak","spanish","swedish","portuguese","italian","norwegian","icelandic","dutch","croatian","slovenian","romanian","lithuanian","latvian"];MIN_TEXT_LENGTH=50;MIN_WORD_COUNT=10;CONFIDENCE_THRESHOLD=.25;CHAR_FREQUENCIES={polish:{z:.065,w:.045,y:.038,k:.035,c:.04,j:.023},czech:{v:.055,k:.042,p:.031,t:.062,o:.074,e:.084},slovak:{o:.087,a:.089,e:.076,v:.055,k:.044,n:.065},german:{e:.174,n:.098,r:.07,s:.073,i:.065,t:.061},french:{e:.147,s:.079,a:.076,i:.066,t:.072,n:.071},spanish:{e:.137,a:.125,o:.092,s:.072,n:.067,l:.05},italian:{e:.118,a:.117,i:.101,o:.098,n:.069,l:.065},portuguese:{a:.146,e:.126,o:.103,s:.067,r:.065,d:.05},hungarian:{e:.098,a:.088,t:.071,l:.051,s:.057,n:.055},swedish:{e:.1,a:.095,n:.085,r:.084,t:.078,s:.065},norwegian:{e:.156,r:.089,n:.076,t:.073,a:.07,s:.063},danish:{e:.155,r:.089,n:.073,t:.07,a:.06,i:.06},dutch:{e:.189,n:.1,a:.076,t:.069,r:.064,i:.065},icelandic:{a:.109,r:.087,n:.077,i:.076,u:.047,s:.056},croatian:{a:.107,i:.097,o:.089,e:.087,n:.068,j:.047},slovenian:{e:.105,a:.089,i:.088,o:.079,n:.065,l:.048},romanian:{e:.109,i:.108,a:.107,r:.066,t:.059,u:.062},lithuanian:{i:.09,a:.087,s:.062,o:.06,e:.056,t:.051},latvian:{a:.107,i:.09,s:.074,e:.072,t:.061,u:.048}};constructor(){}detect(e){if(!e||e.trim().length===0)return{language:"unknown",confidence:0,scores:{},isReliable:!1};let a=e.trim(),t=a.split(/\s+/).length;if(a.length<this.MIN_TEXT_LENGTH||t<this.MIN_WORD_COUNT)return{language:"unknown",confidence:0,scores:{},isReliable:!1,ambiguousLanguages:["Text too short for reliable detection"]};let i={};for(let d of this.SUPPORTED_LANGUAGES)i[d]=this.calculateLanguageScore(a,d);this.disambiguateSimilarLanguages(i,a);let s=Object.entries(i).sort(([,d],[,p])=>p-d).filter(([,d])=>d>0);if(s.length===0)return{language:"unknown",confidence:0,scores:i,isReliable:!1};let[r,o]=s[0],[h,c]=s[1]||[null,0],u=c>0?Math.min((o-c)/o,1):o>0?1:0,g=u>=this.CONFIDENCE_THRESHOLD,f=s.slice(1,4).filter(([,d])=>d>o*.7).map(([d])=>d);return{language:r,confidence:u,scores:i,isReliable:g,ambiguousLanguages:f.length>0?f:void 0}}calculateLanguageScore(e,a){let t=e.toLowerCase().split(/\s+/).filter(o=>o.length>0);if(t.length===0)return 0;let i=0,s=this.calculateStopwordRatio(t,a);i+=s*150;let r=this.analyzeCharacterFrequency(e,a);i+=r*80,i+=this.analyzeTrigrams(e,a)*60;for(let o of t)i+=this.scoreWordPatterns(o,a)*1.2,i+=this.scoreWordStructure(o,a)*.9;return i+=this.analyzeBigrams(e,a)*40,i+=this.applyNegativePatterns(t,a),i+=this.checkLanguageSpecificMarkers(t,a)*50,i+=this.analyzeVowelConsonantPatterns(t,a)*25,Math.max(i,0)}disambiguateSimilarLanguages(e,a){let t=a.toLowerCase().split(/\s+/).filter(i=>i.length>2);if(e.czech>0||e.slovak>0){let i=0,s=0;for(let h of t)/(ia|ie|iu)/.test(h)&&(s+=3),/(krat|prav|vlast|robot)/.test(h)&&(s+=4),/ovat$/.test(h)&&(s+=2),/(vsetk|prist|buduci|minul)/.test(h)&&(s+=5),/(ou|ej|uj)/.test(h)&&(i+=3),/(kdo|kde|proc|jake|ktery)/.test(h)&&(i+=5),/(budou|jsou|maji|mame|mate)/.test(h)&&(i+=4),/(prave|vsak|tedy|takze|protoze)/.test(h)&&(i+=5);let r=["som","ste","budem","budes","vsetci","vsetky"],o=["jsem","jste","budou","budeme","budete","vsichni"];for(let h of t)r.includes(h)&&(s+=15),o.includes(h)&&(i+=15);e.slovak+=s,e.czech+=i}if(e.norwegian>0||e.danish>0){let i=0,s=0;for(let r of t)/(kje|sje|gje|bla|bru)/.test(r)&&(i+=4),/(ikke|ogsa|nar|blir|ble|var)/.test(r)&&(i+=3),/(ige|ede|hed|rod|hod)/.test(r)&&(s+=4),/(ikke|ogsaa|naar|bliver|blev|var)/.test(r)&&(s+=3);e.norwegian+=i,e.danish+=s}if(e.croatian>0||e.slovenian>0){let i=0,s=0;for(let r of t)/(ije|jet|ijel|ijat)/.test(r)&&(i+=4),/(biti|imati|raditi|govoriti)/.test(r)&&(i+=3),/(ija|uje|oval)/.test(r)&&(s+=4),/(biti|imeti|delati|govoriti)/.test(r)&&(s+=3);e.croatian+=i,e.slovenian+=s}if(e.portuguese>0||e.spanish>0){let i=0,s=0;for(let r of t)/(ao|oe|nh|lh|cao|sao)/.test(r)&&(i+=4),/(voce|nao|muito|tambem|quando)/.test(r)&&(i+=5),/(usted|muy|tambien|cuando|porque)/.test(r)&&(s+=5),/(cion|sion)$/.test(r)&&(s+=3);e.portuguese+=i,e.spanish+=s}}getStopwords(e){let a={hungarian:["a","az","es","hogy","nem","van","egy","meg","ki","de","is","be","le","fel","ez","azt","akkor","aki","csak","vagy","volt","lehet"],german:["der","die","das","und","ist","zu","den","von","mit","sich","ein","sie","auf","des","im","dem","auch","als","aber","nach","wie","bei","oder"],french:["le","la","et","est","pas","vous","nous","dans","qui","que","il","ce","ne","se","une","ont","les","des","un","pour","par","plus","tout"],spanish:["el","la","de","que","y","en","un","es","se","no","por","los","las","del","al","una","con","para","como","mas","pero","sus","sobre"],italian:["il","la","e","di","che","in","un","non","per","una","le","del","da","al","sono","si","con","come","anche","questo","tutto","ma","pi\xF9"],portuguese:["o","a","e","de","do","da","em","um","para","com","os","as","dos","das","uma","no","na","ao","mais","por","como","mas","se"],swedish:["och","att","i","av","med","som","en","det","den","ett","har","inte","om","var","till","kan","for","ar","pa","eller","vid","men"],norwegian:["og","i","er","av","med","for","som","en","det","at","til","har","ikke","den","om","var","pa","kan","men","eller","nar","fra"],danish:["og","i","er","af","med","for","som","en","det","at","til","har","ikke","den","om","var","pa","kan","men","eller","naar","fra"],dutch:["de","en","het","van","een","te","dat","die","niet","met","op","is","voor","in","zijn","ook","als","maar","door","naar","bij","aan"],czech:["a","se","na","je","v","s","o","z","k","i","to","do","po","ve","by","ze","aby","ale","jsem","jste","jsou","jak","nebo","ten","ta"],polish:["i","w","sie","na","nie","do","o","z","co","to","ze","jak","za","od","po","jest","byl","te","byly","bez","ale","lub","gdy"],slovak:["a","sa","na","je","v","s","o","z","k","i","to","do","po","ve","by","zo","aby","ale","som","ste","su","ako","alebo","ten","ta"],icelandic:["og","i","er","a","ad","um","en","ef","ekki","ha","sem","vid","til","med","fra","var","fyrir","hann","hun","thad","thetta","vi\xF0"],croatian:["i","u","se","na","je","s","o","za","da","su","od","do","po","bio","ali","ili","kao","biti","ima","samo","jos","sve"],slovenian:["in","je","se","na","ni","za","s","o","z","k","v","so","da","do","po","ki","od","ali","tudi","kot","pa","biti","ima"],romanian:["si","cu","in","se","la","este","un","o","ca","pe","de","nu","sunt","ii","din","sau","ce","mai","pentru","care","fi","sunt"],lithuanian:["ir","yra","su","i","o","is","kaip","ne","tai","kad","bet","ar","bus","uz","del","nuo","dar","jau","nes","kol","kai","kas"],latvian:["un","ir","ar","ka","no","uz","par","bet","vai","kas","tas","lai","to","so","vai","ir","kura","kurs","kadi","tad","v\u0113l","jau"]};return new Set(a[e]||[])}calculateStopwordRatio(e,a){let t=this.getStopwords(a);return e.filter(s=>t.has(s)).length/e.length}analyzeCharacterFrequency(e,a){let t=e.toLowerCase(),i={},s=0;for(let h of t)/[a-z]/.test(h)&&(i[h]=(i[h]||0)+1,s++);if(s===0)return 0;let r=this.CHAR_FREQUENCIES[a];if(!r)return 0;let o=0;for(let[h,c]of Object.entries(r)){let u=(i[h]||0)/s,g=Math.abs(u-c);o+=Math.max(0,1-g*8)}return o/Object.keys(r).length}analyzeTrigrams(e,a){let i={german:["sch","ich","ein","und","cht","hen","den","gen","ver","ber"],french:["ent","les","ion","ait","eur","ant","que","ons","ais","eur"],spanish:["ion","ent","que","para","con","los","ado","nte","esto","i\xF3n"],italian:["ion","ent","con","per","che","lla","gli","del","una","ere"],portuguese:["cao","ent","que","para","com","dos","ado","nte","nao","por"],polish:["nie","prz","jak","kie","nia","owi","ego","ych","wie","cie"],hungarian:["sze","eke","tek","nak","ban","ben","ett","ott","att","van"],swedish:["att","och","som","det","ande","ade","het","for","ing","are"],norwegian:["det","som","for","ikke","har","var","ene","som","ble","kan"],danish:["det","for","ikke","har","var","ene","den","men","som","kan"],dutch:["een","het","van","den","der","ver","ijk","ing","aar","oor"],czech:["pro","kte","jak","pra","ova","ale","aby","jen","ted","pri"],slovak:["pre","kte","ako","pra","ova","ale","aby","len","ted","pri"],icelandic:["inn","ara","ega","adur","anna","andi","arna","inum","anna","eyti"],croatian:["ije","ova","ako","ima","bio","biti","nje","iti","ost","ali"],slovenian:["ije","ova","kot","ima","bil","biti","nje","iti","ost","ali"],romanian:["are","ire","tor","cea","cea","lor","lui","sau","este","esc"],lithuanian:["aus","ius","ais","tai","kai","kad","bet","nuo","del","nes"],latvian:["ais","ies","aja","eja","taj","kas","vai","par","bet","tas"]}[a]||[];if(i.length===0)return 0;let s=0,r=e.toLowerCase();for(let o of i){let h=new RegExp(o,"g"),c=r.match(h);c&&(s+=c.length/8)}return Math.min(s,1)}analyzeBigrams(e,a){let i={german:["ch","en","er","ie","de","te","sc","nd","ge","st"],french:["es","de","en","le","re","nt","on","ou","ur","an"],spanish:["de","es","en","el","la","os","ar","er","or","an"],italian:["er","re","la","io","no","to","el","li","he","le"],portuguese:["os","de","es","as","en","ra","te","ao","ar","or"],polish:["rz","cz","sz","ie","ni","na","go","wi","ow","zy"],hungarian:["sz","gy","ny","ly","et","en","tt","ek","ke","te"],swedish:["en","er","et","tt","an","de","om","ar","or","ig"],norwegian:["en","er","et","or","de","sk","te","le","ke","ig"],danish:["en","er","de","et","or","nd","te","ge","ke","ig"],dutch:["en","de","er","te","aa","ij","ee","oo","ch","ng"],czech:["st","pr","ov","ni","te","ne","le","je","ch","po"],slovak:["st","pr","ov","ni","te","ne","le","je","ch","po"],icelandic:["ur","ar","ir","um","ri","st","nn","ad","eg","il"],croatian:["je","na","st","pr","ra","no","ti","ko","ni","ta"],slovenian:["je","na","st","pr","ra","no","ti","ko","ni","ta"],romanian:["de","re","ul","ar","ea","le","te","ii","or","ur"],lithuanian:["as","is","us","ai","ei","au","ta","ti","ka","ur"],latvian:["as","is","aj","am","ie","ar","ka","ta","es","ie"]}[a]||[];if(i.length===0)return 0;let s=0,r=e.toLowerCase();for(let o of i){let h=new RegExp(o,"g"),c=r.match(h);c&&(s+=c.length/12)}return Math.min(s,1)}scoreWordPatterns(e,a){if(e.length<3)return 0;let t=0;switch(a){case"hungarian":/(sz|cs|gy|ly|ny|ty|zs)/.test(e)&&(t+=4),e.length>4&&/[bcdfghjklmnpqrstvwxz]{3}/.test(e)&&(t+=2),/(ban|ben|nak|nek|val|vel)$/.test(e)&&(t+=3);break;case"german":/(sch|ch)/.test(e)&&(t+=4),/(^ge|^be|^er|^ver|^zer|^ent)/.test(e)&&(t+=3),/(ung|lich|keit)$/.test(e)&&(t+=3),/(ss|tz)/.test(e)&&(t+=2);break;case"french":/(eau|eux|aux)/.test(e)&&(t+=5),/(qu|ou|ai|eu)/.test(e)&&(t+=2),/(tion|ment|eur)$/.test(e)&&(t+=3);break;case"spanish":/(ll|rr)/.test(e)&&(t+=5),/(qu|gu|ci|gi)/.test(e)&&(t+=2),/(cion|dad|mente)$/.test(e)&&(t+=3);break;case"czech":/(ou|ej|uj)/.test(e)&&(t+=5),/(ch|ck)/.test(e)&&(t+=2),e.length>5&&/[bcdfghjklmnpqrstvwxz]{3}/.test(e)&&(t+=2),/(stv|ckn|prv)/.test(e)&&(t+=4);break;case"slovak":/(ia|ie|iu)/.test(e)&&(t+=5),/(ch|ck)/.test(e)&&(t+=2),e.length>5&&/[bcdfghjklmnpqrstvwxz]{3}/.test(e)&&(t+=2),/(stv|ckn)/.test(e)&&(t+=3);break;case"polish":/(sz|cz|rz|dz)/.test(e)&&(t+=5),/(prz|trz|krz|szcz)/.test(e)&&(t+=6),/(ow|ych|ego|emu)$/.test(e)&&(t+=3);break;case"swedish":case"norwegian":case"danish":/(sj|skj|tj)/.test(e)&&(t+=4),/(het|skap|else|ning)$/.test(e)&&(t+=3);break;case"italian":/(cc|ff|gg|ll|mm|nn|pp|rr|ss|tt|zz)/.test(e)&&(t+=4),/(zione|mento|aggio)$/.test(e)&&(t+=4),/(gli|gn)/.test(e)&&(t+=3);break;case"portuguese":/(ao|oe|ae|ca|nh|lh)/.test(e)&&(t+=4),/(mente|cao|dade|agem)$/.test(e)&&(t+=4);break;case"icelandic":e.length>3&&/(ur|ir|ar|un)$/.test(e)&&(t+=4),/(eyj|ey|ae)/.test(e)&&(t+=3);break;case"dutch":/(ij|sch|ijk)/.test(e)&&(t+=5),/(heid|schap|ing|tje)$/.test(e)&&(t+=3),/(aa|ee|oo|uu)/.test(e)&&(t+=2);break;case"croatian":case"slovenian":e.length>5&&/[bcdfghjklmnpqrstvwxz]{3}/.test(e)&&(t+=2),/(anj|enj|ost|stv)/.test(e)&&(t+=3);break;case"romanian":/(esc|ire|tor|tii)/.test(e)&&(t+=3),/(ul|le|lor)$/.test(e)&&(t+=2);break;case"lithuanian":/(tion|mas|ien|ymas)/.test(e)&&(t+=3),/(as|is|us)$/.test(e)&&(t+=2);break;case"latvian":/(tion|ana|aja)/.test(e)&&(t+=3),/(as|is|us)$/.test(e)&&(t+=2);break}return t}scoreWordStructure(e,a){if(e.length<4)return 0;let t=0,s={hungarian:["ban","ben","nak","nek","val","vel","tol","kent","hoz","hez","rol","bol","ert"],german:["ung","heit","keit","schaft","chen","lein","lich","bar","sam","los","voll","haft"],french:["ment","tion","eur","euse","ique","iste","ance","ence","able","ible","aise","ois"],spanish:["cion","miento","dad","tad","eza","aje","ero","ismo","ador","ante","ente","able"],italian:["zione","mento","tore","trice","ezza","aggio","iere","ismo","abile","ibile","ante"],polish:["anie","enie","osc","stwo","cja","dzki","ski","owy","owy","nym","nych","ego"],czech:["ani","eni","stvi","ost","cny","ovat","ovani","eho","ymi","ych","emu","ou"],slovak:["anie","enie","stvo","ost","cny","ovat","ovanie","eho","ymi","ych","emu","ou"],swedish:["het","skap","else","ning","ande","ende","are","ast","lig","sam","bar","full"],portuguese:["cao","mente","dade","agem","ario","orio","ismo","ista","avel","ivel","ante"],norwegian:["het","skap","else","ning","ende","ande","ere","est","lig","som","bar","full"],danish:["hed","skab","else","ning","ende","ande","ere","est","lig","som","bar","fuld"],icelandic:["ur","ir","ar","un","ing","ana","legur","inn","andi","endum","anna","arna"],dutch:["heid","schap","ing","tje","atie","iteit","lijk","baar","zaam","loos","vol","achtig"],croatian:["anje","enje","ost","stvo","acija","iranje","itelj","ica","nik","ski","cki","nja"],slovenian:["anje","enje","ost","stvo","cija","iranje","itelj","ica","nik","ski","cki","nja"],romanian:["are","ire","tor","tie","ism","ist","esc","ului","ilor","ului","oare","itoare"],lithuanian:["imas","ymas","tis","tys","umas","ybe","tojas","toja","inis","iskas","iai","iams"],latvian:["sana","sanas","tajs","taja","ums","iens","ejais","iska","iski","ais","ajam","ajos"]}[a]||[];for(let r of s)if(e.endsWith(r)&&e.length>r.length+2){t+=3;break}return t}applyNegativePatterns(e,a){let t=0;for(let i of e)if(!(i.length<3))switch(a){case"hungarian":/th|ph|qu|x/.test(i)&&(t-=3);break;case"polish":/qu|x/.test(i)&&(t-=3),!/[zywk]/.test(i)&&i.length>6&&(t-=1);break;case"italian":/[kxy]/.test(i)&&(t-=2);break;case"spanish":/[kw]/.test(i)&&!/(whisky|kilo)/.test(i)&&(t-=2);break;case"czech":/qu|x/.test(i)&&(t-=2),/(ia|ie|iu)/.test(i)&&i.length>4&&(t-=2);break;case"slovak":/qu|x/.test(i)&&(t-=2),/(ou|ej|uj)/.test(i)&&i.length>4&&(t-=2);break;case"french":/[kxy]/.test(i)&&!/(taxi|examen)/.test(i)&&(t-=1);break;case"portuguese":/[kwy]/.test(i)&&!/(whisky|yacht)/.test(i)&&(t-=1);break}return t}checkLanguageSpecificMarkers(e,a){let i={hungarian:["hogy","nincs","lesz","volt","lehet","kell","minden","csak","alatt","felett"],german:["auch","oder","aber","wenn","weil","doch","noch","mehr","sein","haben"],french:["vous","nous","tout","plus","peut","faire","tous","leur","fait","sans"],spanish:["todo","todos","muy","mas","puede","hacer","todos","tiene","hacer","solo"],italian:["tutto","tutti","molto","piu","fare","essere","solo","anche","dove","cosa"],portuguese:["tudo","todos","muito","mais","fazer","ser","pode","tem","esse","onde"],polish:["wszystko","bardzo","teraz","byl","byla","bylo","moge","mozna","trzeba","juz"],czech:["vsechno","vse","vsak","velmi","ted","jeste","uz","ale","take","tedy"],slovak:["vsetko","vsetci","velmi","teraz","este","uz","ale","tiez","teda","len"],swedish:["alla","allt","mycket","kan","ska","skulle","vara","hur","nar","varfor"],norwegian:["alle","alt","meget","kan","skal","skulle","vaere","hvordan","nar","hvorfor"],danish:["alle","alt","meget","kan","skal","skulle","vaere","hvordan","naar","hvorfor"],dutch:["alle","alles","veel","kan","zal","zou","zijn","hoe","wanneer","waarom"],icelandic:["allir","allt","mjog","geta","skulu","vera","hvernig","hven\xE6r","hvers vegna"],croatian:["svi","sve","vrlo","moze","biti","ima","kako","kada","zasto","gdje"],slovenian:["vsi","vse","zelo","lahko","biti","ima","kako","kdaj","zakaj","kje"],romanian:["toti","tot","foarte","poate","fi","are","cum","cand","de ce","unde"],lithuanian:["visi","viskas","labai","gali","buti","turi","kaip","kada","kodel","kur"],latvian:["visi","viss","loti","var","but","ir","ka","kad","kapec","kur"]}[a]||[],s=0;for(let r of e)i.includes(r)&&s++;return s/Math.max(e.length,1)}analyzeVowelConsonantPatterns(e,a){let t=0;for(let i of e)if(!(i.length<4))switch(a){case"hungarian":/[bcdfghjklmnpqrstvwxz]{4,}/.test(i)&&(t+=2),(/^[aou]+[^aeiou]*[aou]+/.test(i)||/^[eiu]+[^aeiou]*[eiu]+/.test(i))&&(t+=1);break;case"polish":/(prz|trz|krz|str|szcz)/.test(i)&&(t+=3);break;case"czech":/^[^aeiou]{3,}/.test(i)&&(t+=2),/(ou|ej)/.test(i)&&(t+=2);break;case"slovak":/(ia|ie|iu)/.test(i)&&(t+=2),/[aeiou]{2}/.test(i)&&(t+=1);break;case"italian":(i.match(/[aeiou]/g)||[]).length/i.length>.45&&(t+=2),/[aeiou]$/.test(i)&&(t+=1);break;case"finnish":(/([aeiou])\1/.test(i)||/([bcdfghjklmnpqrstvwxz])\1/.test(i))&&(t+=2);break;case"icelandic":/(ey|ae|au)/.test(i)&&(t+=2);break;case"dutch":/(aa|ee|oo|uu|ij)/.test(i)&&(t+=2);break}return t/Math.max(e.length,1)}getSupportedLanguages(){return[...this.SUPPORTED_LANGUAGES]}getConfidenceThreshold(){return this.CONFIDENCE_THRESHOLD}isLanguageSupported(e){return this.SUPPORTED_LANGUAGES.includes(e.toLowerCase())}getMinimumRequirements(){return{minTextLength:this.MIN_TEXT_LENGTH,minWordCount:this.MIN_WORD_COUNT}}};function V(l){let e;(d=>(d.ReportIssue="ps-replace-accents.reportIssue",d.RemoveDiacriticts="ps-replace-accents.removeDiacritics",d.RemoveDiacritictsFileOrFolder="ps-replace-accents.removeDiacriticsFileOrFolder",d.RestoreDiacritics="ps-replace-accents.restoreDiacritics"))(e||={});let a=async(c,u=!1,g)=>{let f=n.window.activeTextEditor;if(!f)return 0;let d=!1,p=f.document,m=f.selections;if(!m.length||m.every(v=>v.isEmpty)){let v=new n.Range(0,0,p.lineCount-1,p.lineAt(p.lineCount-1).text.length),k=p.getText(v),y=k.length>0?c(k,g):"";return k!==y&&(await f.edit(w=>w.replace(v,y)),d=!0),d?2:0}return await f.edit(v=>{for(let k of m){if(k.isEmpty)continue;let y=k;if(u){let _=p.lineAt(k.start.line),q=p.lineAt(k.end.line);y=new n.Selection(_.range.start,q.range.end)}let w=p.getText(y),j=w.length>0?c(w,g):"";w!==j&&(v.replace(y,j),d=!0)}}),d?1:0},t=()=>{let c=n.window.activeTextEditor;if(!c)return"";let u=c.document,g=c.selections;if(g.length&&!g.every(p=>p.isEmpty)){for(let p of g)if(!p.isEmpty){let m=u.getText(p);return b(m.substring(0,125))}}let f=new n.Range(0,0,u.lineCount-1,u.lineAt(u.lineCount-1).text.length),d=u.getText(f);return b(d.substring(0,125))},i=async(c,u={},g)=>{let f=new U(c,u),d=g.fsPath,p=C.basename(d),m=C.dirname(d),v=f.removeDiacritics(p);if(v.length===0)return;if(p===v){n.window.showWarningMessage(n.l10n.t("No diacritics were removed from '{0}'.",p));return}let k=C.join(m,v),y=n.Uri.file(k),w=!1;if(await s(y))if(await n.window.showWarningMessage(n.l10n.t("'{0}' already exists. Do you want to overwrite it?",v),{modal:!0},n.l10n.t("Yes"),n.l10n.t("No"))===n.l10n.t("Yes"))w=!0;else return;try{await n.workspace.fs.rename(g,y,{overwrite:w}),n.window.showInformationMessage(n.l10n.t("Renamed: {0} to {1}",p,v))}catch(j){n.window.showErrorMessage(n.l10n.t("Failed to rename '{0}': {1}",p,j.message))}},s=async c=>{try{return await n.workspace.fs.stat(c),!0}catch{return!1}},r=async c=>{let u=n.workspace.getConfiguration("ps-replace-accents").get("textLanguage","auto");if(u!=="auto")return u;let f=new S().detect(c);return console.log(c,f),f.language!=="unknown"?f.language:void 0},o=async c=>{let u=await r(c);return u||await n.window.showWarningMessage(n.l10n.t("Select a text language in Settings to restore diacritics."),n.l10n.t("Open Settings"),n.l10n.t("Cancel"))===n.l10n.t("Open Settings")&&await n.commands.executeCommand("workbench.action.openSettings","ps-replace-accents.textLanguage"),u},h={"ps-replace-accents.reportIssue":()=>n.env.openExternal(n.Uri.parse("https://github.com/playfulsparkle/vscode_ps_replace_accents/issues")),"ps-replace-accents.removeDiacritics":async()=>{let c=n.workspace.getConfiguration("ps-replace-accents").get("userCharacterMapping",{}),u=A(c);if(u){n.window.showErrorMessage(u);return}let g=t(),f=await r(g),d=new U(f,c);switch(await a(m=>d.removeDiacritics(m))){case 1:n.window.showInformationMessage(n.l10n.t("Removed diacritics in selection."));break;case 2:n.window.showInformationMessage(n.l10n.t("Removed diacritics in document."));break}},"ps-replace-accents.removeDiacriticsFileOrFolder":async(c,u)=>{if(!c)return;let g=n.workspace.getConfiguration("ps-replace-accents").get("userCharacterMapping",{}),f=A(g);if(f){n.window.showErrorMessage(f);return}let d=u&&u.length>0?u:[c],p=await o(d.join(" "));if(p){for(let m of d)await i(p,g,m);d.length>1&&n.window.showInformationMessage(n.l10n.t("Diacritics removed from {0} items.",d.length))}},"ps-replace-accents.restoreDiacritics":async()=>{let c=n.workspace.getConfiguration("ps-replace-accents").get("diacriticRestoreSuffixMatching",!1),u=n.workspace.getConfiguration("ps-replace-accents").get("diacriticIgnoredWords",""),g=N(u),f=t(),d=await o(f);if(!d)return;let p=new P(d,g,c);await p.initialize();let m=await a(v=>p.restoreDiacritics(v));switch(p.dispose(),m){case 1:n.window.showInformationMessage(n.l10n.t("Restored diacritics in selection."));break;case 2:n.window.showInformationMessage(n.l10n.t("Restored diacritics in document."));break}}};for(let[c,u]of Object.entries(h)){let g=n.commands.registerCommand(c,u);l.subscriptions.push(g)}}function Q(){}0&&(module.exports={activate,deactivate});
